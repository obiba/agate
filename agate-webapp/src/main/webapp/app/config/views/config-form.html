<!--
  ~ Copyright (c) 2019 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <h2>
    <ol class="agate-breadcrumb">
      <li><a href="#/admin" translate>global.menu.admin</a></li>
      <li class="active" translate>config.general.title</li>
    </ol>
  </h2>

  <form name="form" role="form" novalidate
        class="ng-scope ng-invalid ng-invalid-required ng-dirty" ng-submit="save()">
    <div class="row">
      <div class="col-md-6">

        <div form-input name="name" model="agateConfig.name" label="config.name" required="true"
             help="config.name-help"></div>

        <div form-input name="publicUrl" model="agateConfig.publicUrl" label="config.publicUrl"
             help="config.publicUrl-help"></div>

        <div form-input name="publicUrl" model="agateConfig.portalUrl" label="config.portalUrl"
             help="config.portalUrl-help"></div>

        <div form-input name="domain" model="agateConfig.domain" label="config.domain"
             help="config.domain-help"></div>

        <div form-input type="number" min="0" name="shortTimeout" model="agateConfig.shortTimeout"
             label="config.shortTimeout"
             help="config.shortTimeout-help"></div>

        <div form-input type="number" min="0" name="longTimeout" model="agateConfig.longTimeout"
             label="config.longTimeout"
             help="config.longTimeout-help"></div>
      </div>
      <div class="col-md-6">

        <div class="form-group"
             ng-class="{'has-error': (form.languages.$dirty || form.saveAttempted) && form.languages.$invalid}">
          <label for="languages" class="control-label">
            <span translate>config.languages</span> *
          </label>
          <select chosen multiple="multiple" id="languages" name="languages" ng-model="agateConfig.languages"
                  ng-options="code as name for (code, name) in availableLanguages" class="chosen-select" required>
          </select>
          <p class="input-error" ng-show="form.languages.$dirty && form.languages.$invalid">
            <span ng-show="form.languages.$error.required" translate>required</span>
          </p>
          <p class="help-block" translate>config.languages-help</p>
        </div>

        <div form-input type="number" min="0" name="inactiveTimeout" model="inactiveTimeoutDays"
             label="config.inactiveTimeout"
             help="config.inactiveTimeout-help"></div>

        <div form-checkbox min="0" name="joinPageEnabled" model="agateConfig.joinPageEnabled"
             label="config.joinPageEnabled"
             help="config.joinPageEnabled-help"></div>

        <div form-checkbox min="0" name="joinWithUsername" model="agateConfig.joinWithUsername"
             label="config.joinWithUsername"
             help="config.joinWithUsername-help"></div>

        <div form-input name="joinWhitelist" model="agateConfig.joinWhitelist" label="config.joinWhitelist"
             help="config.joinWhitelist-form-help"></div>

        <div form-input name="joinBlacklist" model="agateConfig.joinBlacklist" label="config.joinBlacklist"
             help="config.joinBlacklist-form-help"></div>
        
        <div form-ui-select name="enforced2FAStrategy" model="agateConfig.enforced2FAStrategy"
             items="enforced2FAStrategies"
             multiple="false"
             auto-complete="false"
             description="'config.enforced2FA-help' | translate"></div>
      </div>
    </div>

    <div class="voffset4">
      <a href="#/admin/general" class="btn btn-default">
        <span translate>cancel</span>
      </a>

      <button type="submit" class="btn btn-info">
        <span translate>save</span>
      </button>
    </div>
  </form>

</div>


