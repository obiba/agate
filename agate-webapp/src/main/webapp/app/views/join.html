<!--
  ~ Copyright (c) 2019 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="row" ng-controller="JoinController">
  <div class="col-md-2"></div>

  <div class="col-md-6">
    <obiba-alert id="JoinController"></obiba-alert>

    <div class="well">
      <h4 translate>join.title</h4>
      <div>
        <form name="joinForm" ng-submit="submit(form)">

          <div sf-schema="joinConfig.schema" sf-form="joinConfig.definition" sf-model="model"></div>

          <div class="form-group" ng-if="config"
            vc-recaptcha
            theme="'light'"
            key="config.reCaptchaKey"
            on-create="setWidgetId(widgetId)"
            on-success="setResponse(response)"></div>

          <button type="submit" class="btn btn-primary" ng-click="onSubmit(joinForm)">
            <span translate>join.form.submit</span>
          </button>

          <a href="#/" type="button" class="btn btn-default">
            <span translate>cancel</span>
          </a>
        </form>
      </div>

      <div ng-if="providers && !hasCookie">
        <hr>
        <div ng-repeat="provider in providers">
          <a id="{{provider.name}}" class="btn btn-info btn-block text-center voffset2" href="/auth/signup/{{provider.name}}?redirect={{urlOrigin}}&redirect_hash=join">{{'realm.oidc.signup-with' | translate}} {{provider.title}}</a>
        </div>
      </div>
    </div>

  </div>

  <div class="col-md-2"></div>
</div>
