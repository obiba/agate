<!--
  ~ Copyright (c) 2019 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <h2>
    <ol class="agate-breadcrumb">
      <li><a href="#/admin" translate>global.menu.admin</a></li>
      <li><a href="#/admin/realms" translate>global.realms</a></li>
      <li class="active">
        <span>{{$ctrl.realm.safeTitle}}</span>
      </li>
    </ol>
  </h2>

  <div class="row">
    <div class="col-md-6">
      <h3 translate>properties</h3>
      <table class="table table-bordered table-striped">
        <tbody>
          <tr>
            <th translate>global.name</th>
            <td>{{$ctrl.realm.name}}</td>
          </tr>
          <tr>
            <th translate>global.title</th>
            <td><localized value="$ctrl.realm.title" lang="$ctrl.locale.language" key-lang="lang" key-value="value"></localized></td>
          </tr>
          <tr>
            <th translate>global.description</th>
            <td><localized value="$ctrl.realm.description" lang="$ctrl.locale.language" key-lang="lang" key-value="value"></localized></td>
          </tr>
          <tr>
            <th translate>global.status</th>
            <td><span>{{'realm.' + $ctrl.realm.status | translate}}</span></td>
          </tr>
          <tr>
            <th translate>realm.for-signup</th>
            <td><span><i class="fa" ng-class="{'fa-check': $ctrl.realm.forSignup, 'fa-times': !$ctrl.realm.forSignup}"></i></span></td>
          </tr>
          <tr>
            <th translate>global.groups</th>
            <td><span class="label label-default hoffset-right" ng-repeat="group in $ctrl.realm.groups">{{group}}</span></td>
          </tr>
        </tbody>
      </table>

      <div ng-if="$ctrl.realm.userInfoMapping">
        <h3 translate>{{'realm.user-info-mapping'}}</h3>
        <table class="table table-bordered table-striped">
          <tbody>
            <tr ng-repeat="(key, value) in $ctrl.realm.userInfoMapping">
              <th>{{'user-info.' + key | translate}}</th>
              <th>{{value}}</th>
            </tr>
          </tbody>
        </table>
      </div>

      <h3 translate>{{'realm.' + $ctrl.realm.type | translate}}</h3>
      <table class="table table-bordered table-striped">

        <tbody ng-if="$ctrl.realm.type === 'agate-ldap-realm'">
        <tr>
          <th translate>realm.ldap.url</th>
          <td>{{$ctrl.realm.content.url}}</td>
        </tr>
        <tr>
          <th translate>realm.ldap.system-username</th>
          <td>{{$ctrl.realm.content.systemUsername}}</td>
        </tr>
        <tr>
          <th translate>realm.ldap.user-dn-template</th>
          <td>{{$ctrl.realm.content.userDnTemplate}}</td>
        </tr>
        </tbody>
        <tbody ng-if="$ctrl.realm.type === 'agate-jdbc-realm'">
        <tr>
          <th translate>realm.jdbc.url</th>
          <td>{{$ctrl.realm.content.url}}</td>
        </tr>
        <tr>
          <th translate>realm.jdbc.username</th>
          <td>{{$ctrl.realm.content.username}}</td>
        </tr>
        <tr>
          <th translate>realm.jdbc.authentication-query</th>
          <td>{{$ctrl.realm.content.authenticationQuery}}</td>
        </tr>
        <tr>
          <th translate>realm.jdbc.salt-style</th>
          <td>{{$ctrl.realm.content.saltStyle}}</td>
        </tr>
        <tr>
          <th translate>realm.jdbc.external-salt</th>
          <td>{{$ctrl.realm.content.externalSalt}}</td>
        </tr>
        <tr>
          <th translate>realm.jdbc.algorithm-name</th>
          <td>{{$ctrl.realm.content.algorithmName}}</td>
        </tr>
        </tbody>
        <tbody ng-if="$ctrl.realm.type === 'agate-ad-realm'">
        <tr>
          <th translate>realm.ad.url</th>
          <td>{{$ctrl.realm.content.url}}</td>
        </tr>
        <tr>
          <th translate>realm.ad.system-username</th>
          <td>{{$ctrl.realm.content.systemUsername}}</td>
        </tr>
        <tr>
          <th translate>realm.ad.search-filter</th>
          <td>{{$ctrl.realm.content.searchFilter}}</td>
        </tr>
        <tr>
          <th translate>realm.ad.search-base</th>
          <td>{{$ctrl.realm.content.searchBase}}</td>
        </tr>
        <tr>
          <th translate>realm.ad.principal-suffix</th>
          <td>{{$ctrl.realm.content.principalSuffix}}</td>
        </tr>
        </tbody>
        <tbody ng-if="$ctrl.realm.type === 'agate-oidc-realm'">
        <tr>
          <th translate>realm.oidc.client-id</th>
          <td>{{$ctrl.realm.content.clientId}}</td>
        </tr>
        <tr>
          <th translate>realm.oidc.discovery-uri</th>
          <td>
            <a class="btn btn-xs btn-default" ng-if="$ctrl.realm.content.discoveryURI" href="{{$ctrl.realm.content.discoveryURI}}" target="_blank">{{'realm.oidc.configuration' | translate}}</a>
          </td>
        </tr>
        <tr>
          <th translate>realm.oidc.provider-url</th>
          <td>
            <a class="btn btn-xs btn-default" ng-if="$ctrl.realm.content.providerUrl" href="{{$ctrl.realm.content.providerUrl}}" target="_blank">{{'realm.oidc.user-account' | translate}}</a>
          </td>
        </tr>
        <tr>
          <th translate>realm.oidc.scope</th>
          <td>{{$ctrl.realm.content.scope}}</td>
        </tr>
        <tr>
          <th translate>realm.oidc.use-nonce</th>
          <td><span><i class="fa" ng-class="{'fa-check': $ctrl.realm.content.useNonce, 'fa-times': !$ctrl.realm.content.useNonce}"></i></span></td>
        </tr>
        <tr>
          <th translate>realm.oidc.connect-timeout</th>
          <td>{{$ctrl.realm.content.connectTimeout}}</td>
        </tr>
        <tr>
          <th translate>realm.oidc.read-timeout</th>
          <td>{{$ctrl.realm.content.readTimeout}}</td>
        </tr>
        <tr>
          <th translate>realm.username-claim</th>
          <td><span>{{$ctrl.realm.content.usernameClaim}}</span></td>
        </tr>
        </tbody>

      </table>

      <div>
        <a href="#/admin/realm/{{$ctrl.realm.name}}/edit" class="btn btn-primary">
          <i class="fa fa-pencil-square-o"></i> <span translate>edit</span>
        </a>
      </div>
    </div>


    <div class="col-md-6">
      <users-summaries users="$ctrl.realm.users"></users-summaries>
    </div>
  </div>
</div>
